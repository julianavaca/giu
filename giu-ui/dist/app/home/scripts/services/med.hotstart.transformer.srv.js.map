{"version":3,"sources":["app/home/scripts/services/med.hotstart.transformer.srv.js"],"names":[],"mappings":"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","file":"app/home/scripts/services/med.hotstart.transformer.srv.js","sourcesContent":["'use strict';\n\nimport TimeBaseTransformer from './med.time.base.transformer.srv.js';\n\nexport default class HotStartTransformerService {//extends TimeBaseTransformer {\n\n  hotStartToString(hotStart){\n    hotStart.lthRes = this._toString(hotStart.lowResLength);\n    hotStart.lthWithoutCredits = this._toString(hotStart.lengthWithoutCredits);\n    return hotStart;\n  }\n\n  hotStartToObject(hotStart){\n    hotStart.lowResLength = this._toObject(hotStart.lthRes);\n    delete hotStart.lthRes;\n    hotStart.lengthWithoutCredits = this._toObject(hotStart.lthWithoutCredits);\n    delete hotStart.lthWithoutCredits;\n    return hotStart;\n  }\n\n  //TODO: angular no injecta el timebase transformer\n  timeCodeToFrame(tc, frames){\n    let tcArray = tc.split(\":\").map(it => parseInt(it));\n    let result = 0;\n    result += tcArray[3];\n    result += tcArray[2] * frames;\n    result += tcArray[1] * 60 * frames;\n    result += tcArray[0] * 3600 * frames;\n    return result;\n  }\n\n  framesToTimecode(frames, maxFrames){\n    let tcArray = [0,0,0,0];\n    let remFrames = frames;\n\n    let hours = this._framesToObject(remFrames, 3600, maxFrames);\n    tcArray[0] = hours;\n    remFrames -= this._objectToFrame(hours, 3600, maxFrames);\n\n    let minutes = this._framesToObject(remFrames, 60, maxFrames);\n    tcArray[1] = minutes;\n    remFrames -= this._objectToFrame(minutes, 60, maxFrames);\n\n    let seconds = this._framesToObject(remFrames, 1, maxFrames);\n    tcArray[2] = seconds;\n    remFrames -= this._objectToFrame(seconds, 1, maxFrames);\n\n    tcArray[3] = remFrames;\n\n    return this._fillWithZeroes(tcArray.join(\":\"));\n  }\n\n  _framesToObject(frames, scale, maxFrames) {\n    let object = Math.floor(frames / (scale * maxFrames));\n    return object >= 1 ? object : 0;\n  }\n\n  _objectToFrame(object, scale, maxFrames) {\n    return object * (scale * maxFrames);\n  }\n\n  _toObject(timeCode){\n    if(this._isValid(timeCode)){\n      return this._elementToObject(timeCode);\n    }\n  }\n\n  _toString(timeCodeString) {\n    if(this._isValid(timeCodeString)){\n      return this._elementToString(timeCodeString);\n    }\n  }\n\n  _elementToObject(timeCode) {\n    let splitted = timeCode.split(\":\");\n    return {\n      hour: splitted[0],\n      minute: splitted[1],\n      second: splitted[2],\n      frame: splitted[3]\n    };\n  }\n\n  _elementToString(object) {\n    let stringTC = object.hour + \":\" + object.minute + \":\" + object.second + \":\" + object.frame;\n    return this._fillWithZeroes(stringTC);\n  }\n\n  _fillWithZeroes(stringTC){\n    return stringTC\n      .split(\":\")\n      .map(it => this._fillZeroes(it))\n      .join(':');\n  }\n\n  _fillZeroes(stringTC) {\n    if(stringTC.length < 2){\n      return '0' + stringTC;\n    }\n    return stringTC;\n  }\n\n  _isValid(element){\n    return typeof element !== 'undefined' && element !== null;\n  }\n\n  _areValid(elements){\n    return elements.filter(it => !this._isValid(it)).length === 0;\n  }\n\n}\n"],"sourceRoot":"/source/"}