{"version":3,"sources":["app/home/scripts/controllers/med.search.material.results.ctrl.js"],"names":[],"mappings":"AAAA,OAAO,SAAS,iEAAiE,CAAC,gDAAgD,UAAU,SAAS;EAArJ;;EAGE,IAAI,UACe;EAAnB,OAAO;IACL,SAAS,CAAC,UAAU,uCAAuC;MACzD,WAAW,sCAAsC;;IAEnD,SAAS,YAAY;;+FAJJ,4BAAyB,CAAA,UAAA,WAAA;QAMtC,aAAa,SANA,2BAAyB;;;;QAGjC,SAHQ,0BAIjB,WACA,QACA,kBAAkB;UAKZ,IAAI,QAAQ;;UAEZ,aAAa,eAAe,MAbjB;;UAOjB,aAAA,IAAA,OAAA,eAPiB,0BAAyB,YAAA,eAAA,MAAA,KAAA,MAQxC;YACE,UAAU;YACV,UAAU;YACV,YACA;cACE,SAAS;cACT,SAAQ;cACR,QAAQ;;;;UAKd,KAAK,QAAQ;UACb,KAAK,mBAAmB;UACxB,KAAK,kBAAkB,EAAC,OAAO;;;UAG/B,KAAK,UAAU,CACb;YACE,SAAQ,iBAAiB,UAAU;YACnC,QAAQ,SAAA,SAAM;cAAE,MAAK,MAAM,GAAG,UAAU,MAAK,MAAM;;YACnD,MAAM;;UAGV,KAAK,cAAc,CACjB;YACE,OAAO,KAAK,iBAAiB,UAAU;YACvC,QAAQ,SAAA,SAAM;cACZ,MAAK,MAAM,GAAG,kBAAkB,EAAC,cAAa,MAAK,KAAK,QAAQ,MAAK,UAAU,SAAS,IAAG,aAAY,MAAK,KAAK,QAAQ,MAAK,UAAU,SAAS,QAAQ,MAAK,EAAC,QAAQ;;YAEzK,MAAM,KAAK;aAEb;YACE,OAAO,KAAK,iBAAiB,UAAU;YACvC,QAAQ,SAAA,SAAM;cACZ,MAAK;;YAEP,MAAM,KAAK;;;UAIf,KAAK,SAAS;YACZ,SAAQ;YACR,OAAO,EAAC,WAAW,KAAK,MAAM,OAAO;YACrC,WAAW;YACX,aAAa,KAAK,iBAAiB,UAAU;YAC7C,QAAQ,SAAA,SAAM;cAAE,MAAK;;YACrB,OAAO,SAAA,QAAM;cAAE,MAAK,iCAAiC,CAAC,cAAc;;;;UAGtE,KAAK,SAAS,KAAK,OAAO;;;QAStB,aAAa,YAnEA,2BAAyB,CAAA;UAoEpC,KAAK;UACL,OARM,SAAA,eAAC,OAAM,MAAK;YACxB,KAAK,eAAa;YAClB,KAAK,WAAS;YACd,IAAG,KAAK,gBAAgB,WAAU;cAChC,KAAK,gBAAgB,QAAQ;mBACxB;cACL,KAAK,gBAAgB,QAAQ;;;WAWxB;UACD,KAAK;UACL,OATU,SAAA,qBAAE;YAClB,IAAG,CAAC,KAAK,cAAc;cACrB,OAAO;;YAET,IAAI,SAAS;cACX,YAAY,KAAK,aAAa,SAAS;cACvC,WAAW,KAAK,aAAa,QAAQ;;YAEvC,KAAK,MAAM,GAAG,uBAAuB;;;QAYjC,OA3Fa;SAAkC;;MA8FjD,QAAQ,WA9FO;;;GAiGlB","file":"app/home/scripts/controllers/med.search.material.results.ctrl.js","sourcesContent":["'use strict';\n\nimport Pageable from 'module-crud-ui/app/scripts/crud.pageable.js';\n\nexport default class SearchMaterialResultsCtrl extends Pageable {\n\n  /*@ngInject*/\n  constructor(\n    $injector,\n    $state,\n    translateService) {\n    super(\n      {\n        injector: $injector,\n        endpoint: 'materialmedias',\n        selectable:\n        {\n          itemKey: 'cid',\n          enabled:true,\n          params: {}\n        }\n      }\n    );\n\n    this.state = $state;\n    this.translateService = translateService;\n    this.showContextMenu = {value: false};\n\n    //TODO: Fix actions from card\n    this.actions = [\n      {\n        tooltip:translateService.translate('tooltip.search'),\n        action: () => { this.state.go('search', this.state.params); },\n        icon: 'arrow-left'\n      }\n    ];\n    this.contextMenu = [\n      {\n        label: this.translateService.translate('med.materials.details'),\n        action: () => {\n          this.state.go('materialDetail', {'materialId':this.page.content[this.selected].material.id,'chapterId':this.page.content[this.selected].material.chapter.id}, {reload: true});\n        },\n        show: this.showContextMenu\n      },\n      {\n        label: this.translateService.translate('results.detail.material.programming'),\n        action: () => {\n          this.goDailyprogramming();\n        },\n        show: this.showContextMenu\n      }\n    ];\n\n    this.search = {\n      enabled:true,\n      param: {chapterId: this.state.params.chapterId},\n      paramName: 'chapterId',\n      placeholder: this.translateService.translate('results.material.search.placeholder'),\n      submit: () => { this.get(); },\n      close: () => { this.removeSpecificParamsAndResetPage(['chapterId']).get(); }\n    };\n\n    this.params = this.search.param;\n  }\n\n  selectedChange(index,item){\n    this.itemSelected=item;\n    this.selected=index;\n    if(this.itemSelected != undefined){\n      this.showContextMenu.value = true;\n    } else {\n      this.showContextMenu.value = false;\n    }\n  }\n\n  goDailyprogramming(){\n    if(!this.itemSelected) {\n      return false;\n    }\n    let params = {\n      materialId: this.itemSelected.material.id,\n      chapterId: this.itemSelected.chapter.id\n    };\n    this.state.go('materialProgramming', params);\n  }\n}\n"],"sourceRoot":"/source/"}