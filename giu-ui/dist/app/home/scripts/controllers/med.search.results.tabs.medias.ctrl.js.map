{"version":3,"sources":["app/home/scripts/controllers/med.search.results.tabs.medias.ctrl.js"],"names":[],"mappings":"AAAA,OAAO,SAAS,oEAAoE,CAAC,gDAAgD,UAAU,SAAS;;;EAAxJ;;EAKE,IAAI,UAAe;EACnB,OAAO;IACL,SAAS,CAAC,UAAU,uCAAuC;MACzD,WAAW,sCAAsC;;IAEnD,SAAS,YAAY;;wGALJ,8BAA2B,CAAA,UAAA,WAAA;QAOxC,aAAa,SAPA,6BAA2B;;;;QAGjC,SAHM,4BAGL,WAAW,KAAK,QAAO,kBAAiB;UAS9C,aAAa,eAAe,MAZjB;;UAKf,aAAA,IAAA,OAAA,eALe,4BAA2B,YAAA,eAAA,MAAA,KAAA,MAKpC;YACJ,UAAS;YACT,UAAS;YACT,aAAa;YACb,KAAI;YACJ,cAAc;YACd,gBAAgB;YAChB,sBAAsB;YACtB,oBAAmB;YACnB,YAAY;;UAEd,KAAK,MAAM;UACX,KAAK,QAAQ;UACb,KAAK,mBAAmB;UACxB,KAAK;;;QAYH,aAAa,YA/BA,6BAA2B,CAAA;UAgCtC,KAAK;UACL,OAVD,SAAA,QAAE;YAWC,IAAI,QAAQ;;YAVlB,IAAG,CAAC,KAAK,MAAM,OAAO,IAAG;cACvB,OAAO;;YAET,KAAK,sBAAoB,EAAC,OAAM;YAChC,KAAK,UAAU,CACb;cACE,SAAS,KAAK,iBAAiB,UAAU;cACzC,MAAM;cACN,QAAQ,SAAA,SAAM;gBAAC,MAAK,eAAa,KAAK,MAAK,oBAAoB,QAAM,CAAC,MAAK,oBAAoB;;cAC/F,MAAK,KAAK;;;YAId,KAAK,MAAM,SAAS,KAAK,UAAC,UAAW;cACnC,QAAQ,IAAI;cACZ,MAAK,oBAAoB,QAAQ,CAAC,SAAS,oBAAoB,SAAS;;;WAerE;UACD,KAAK;UACL,OAZM,SAAA,aAAC,SAAS;YACpB,EAAE,yBAAyB,SAAS,SAAS;YAC7C,KAAK,WAAW;;WAcX;UACD,KAAK;UACL,OAbM,SAAA,aAAC,MAAK;YAcV,IAAI,SAAS;;YAbnB,IAAG,KAAK,OAAO,aAAa;cAC1B,OAAO,KAAK,OAAO,YAAY;;YAEjC,IAAG,KAAK,OAAO,WAAW;cACxB,OAAO,KAAK,OAAO,UAAU;;YAE/B,KAAK,KAAK,MAAM,KAAK,YAAI;cACvB,OAAK,eAAe;cACpB,OAAK,sBAAsB,EAAC,OAAO;cACnC,OAAK;;;WAkBF;UACD,KAAK;UACL,OAhBM,SAAA,eAAC,OAAM;YACnB,IAAG,MAAM,UAAU,MAAM,UAAU,MAAM,MAAM;cAC7C,IAAI,cAAc;gBAChB,aAAa,MAAM;gBACnB,WAAW,MAAM;gBACjB,SAAS,MAAM;;cAEjB,KAAK,MAAM,GAAG,iBAAiB;;;WAmB1B;UACD,KAAK;UACL,OAjBO,SAAA,kBAAE;YACf,KAAK,eAAe;YACpB,KAAK,oBAAoB,QAAM;YAC/B,KAAK;;;QAoBD,OAjGa;SAAoC;;MAoGnD,QAAQ,WApGO;;;GAuGlB","file":"app/home/scripts/controllers/med.search.results.tabs.medias.ctrl.js","sourcesContent":["'use strict';\n\nimport Saveable from 'module-crud-ui/app/scripts/crud.saveable.js';\n/* global $ */\n\nexport default class SearchResultsTabsMediasCtrl extends Saveable {\n\n    /*@ngInject*/\n    constructor($injector, api, $state,translateService){\n\n      super({\n        injector:$injector,\n        endpoint:'relMedias',\n        backToState: \".\",\n        key:'id',\n        successTitle: 'media.edit.alert.success.title',\n        successMessage: 'media.edit.alert.success.message',\n        successCreateMessage: 'media.edit.alert.create.success.message',\n        successEditMessage:'common.alert.edit.success.title',\n        errorTitle: 'media.edit.alert.error'\n      });\n      this.api = api;\n      this.state = $state;\n      this.translateService = translateService;\n      this._load();\n\n    }\n\n    _load(){\n      if(!this.state.params.id){\n        return false;\n      }\n      this.isNotVirtualSegment={value:false};\n      this.actions = [\n        {\n          tooltip: this.translateService.translate('tooltip.edit'),\n          icon: 'edit',\n          action: () => {this.relMediaEdit=true;this.isNotVirtualSegment.value=!this.isNotVirtualSegment.value;},\n          show:this.isNotVirtualSegment\n        }\n      ];\n\n      this.get().$promise.then((response)=>{\n        console.log(response);\n        this.isNotVirtualSegment.value = !response.isVirtualSegment && response.isMediaMaterialEnabled;\n\n      });\n    }\n\n    runDirective(binding) {\n      $('.lov-search-container').detach().appendTo('body');\n      this[binding] = true;\n    }\n\n    saveAndClose(form){\n      if(this.entity.originMedia) {\n        delete this.entity.originMedia.selected;\n      }\n      if(this.entity.rootMedia) {\n        delete this.entity.rootMedia.selected;\n      }\n      this.save(form).then(()=>{\n        this.relMediaEdit = false;\n        this.isNotVirtualSegment = {value: true};\n        this._load();\n      });\n    }\n\n  goToChildMedia(child){\n    if(child.number && child.format && child.type) {\n      let childParams = {\n        mediaFormat: child.format,\n        mediaType: child.type,\n        mediaId: child.number\n      };\n      this.state.go('searchResults', childParams);\n    }\n  }\n\n  cancelRelMedias(){\n    this.relMediaEdit = false;\n    this.isNotVirtualSegment.value=true;\n    this._load();\n  }\n\n}\n"],"sourceRoot":"/source/"}