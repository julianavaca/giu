{"version":3,"sources":["app/home/scripts/controllers/med.search.results.tabs.sot.ctrl.js"],"names":[],"mappings":"AAAA,OAAO,SAAS,iEAAiE,CAAC,gDAAgD,UAAU,SAAS;EAArJ;;EAGE,IAAI,UAEe;EADnB,OAAO;IACL,SAAS,CAAC,UAAU,uCAAuC;MACzD,WAAW,sCAAsC;;IAEnD,SAAS,YAAY;;qGAHJ,2BAAwB,CAAA,UAAA,WAAA;QAKrC,aAAa,SALA,0BAAwB;;;;QAG9B,SAHM,yBAGL,WAAW,KAAK,QAAO,kBAAiB;UAO9C,aAAa,eAAe,MAVjB;;UAKf,aAAA,IAAA,OAAA,eALe,yBAAwB,YAAA,eAAA,MAAA,KAAA,MAMrC;YACE,UAAS;YACT,UAAS;YACT,aAAa;YACb,KAAI;YACJ,cAAc;YACd,gBAAgB;YAChB,sBAAsB;YACtB,oBAAmB;YACnB,YAAY;YACZ,YAAW;;UAEf,KAAK,MAAM;UACX,KAAK,QAAQ;UACb,KAAK,mBAAmB;UACxB,KAAK,WAAW;UAChB,IAAG,KAAK,MAAM,OAAO,IAAG;YACtB,KAAK;YACL,KAAK;;;;QAUL,aAAa,YAlCA,0BAAwB,CAAA;UAmCnC,KAAK;UACL,OARU,SAAA,mBAAE;YAChB,KAAK,WAAS;YACd,IAAI,MAAM,SAAS,KAAK,OAAO;YAC/B,OAAM,MAAI,GAAE;cACV,KAAK,SAAS,KAAK;cACnB;;;WAWG;UACD,KAAK;UACL,OATG,SAAA,YAAE;YACT,KAAK;;WAWA;UACD,KAAK;UACL,OAVD,SAAA,QAAE;YAWC,IAAI,QAAQ;;YAVnB,KAAK,sBAAsB,EAAC,OAAM;YACjC,KAAK,UAAU,CACb;cACE,OAAM;cACN,SAAS,KAAK,iBAAiB,UAAU;cACzC,MAAM;cACN,QAAQ,SAAA,SAAM;gBAAC,MAAK,UAAQ,KAAK,MAAK,oBAAoB,QAAM,CAAC,MAAK,oBAAoB;;cAC1F,MAAK,KAAK;;YAGlB,KAAK,MAAM,SAAS,KAAK,UAAC,UAAa;cACjC,MAAK,oBAAoB,QAAQ,CAAC,SAAS,kBAAkB,SAAS;;;WAenE;UACD,KAAK;UACL,OAbM,SAAA,aAAC,MAAK;YAcV,IAAI,SAAS;;YAbnB,IAAG,KAAK,OAAO,mBAAmB,WAAU;cAC1C,OAAO,KAAK,OAAO;;YAErB,KAAK,KAAK,MAAM,KAAK,YAAI;cAAE,OAAK,UAAU,MAAM,OAAM,oBAAoB,QAAQ;;;WAmB7E;UACD,KAAK;UACL,OAlBC,SAAA,YAAE;YACT,KAAK,UAAS;YACd,KAAK,oBAAoB,QAAQ;YACjC,KAAK;;;QAqBD,OAxFa;SAAiC;;MA2FhD,QAAQ,WA3FO;;;GA8FlB","file":"app/home/scripts/controllers/med.search.results.tabs.sot.ctrl.js","sourcesContent":["'use strict';\n\nimport Saveable from 'module-crud-ui/app/scripts/crud.saveable.js';\n\n\nexport default class SearchResultsTabsSotCtrl extends Saveable {\n\n    /*@ngInject*/\n    constructor($injector, api, $state,translateService){\n\n      super(\n        {\n          injector:$injector,\n          endpoint:'setOfTapesCurrent',\n          backToState: \".\",\n          key:'id',\n          successTitle: 'media.edit.alert.success.title',\n          successMessage: 'media.edit.alert.success.message',\n          successCreateMessage: 'media.edit.alert.create.success.message',\n          successEditMessage:'common.alert.edit.success.title',\n          errorTitle: 'media.edit.alert.error',\n          executeGet:false\n        });\n      this.api = api;\n      this.state = $state;\n      this.translateService = translateService;\n      this.partList = [];\n      if(this.state.params.id){\n        this._load();\n        this.generatePartList();\n      }\n    }\n\n    generatePartList(){\n      this.partList=[];\n      let aux = parseInt(this.entity.partsTotal);\n      while(aux>0){\n        this.partList.push(aux);\n        aux--;\n      }\n    }\n\n    _initEdit(){\n      this.generatePartList();\n    }\n\n    _load(){\n\t    this.isNotVirtualSegment = {value:false};\n      this.actions = [\n        {\n          roles:'MMMU',\n          tooltip: this.translateService.translate('tooltip.edit'),\n          icon: 'edit',\n          action: () => {this.sotEdit=true;this.isNotVirtualSegment.value=!this.isNotVirtualSegment.value;},\n          show:this.isNotVirtualSegment\n        }\n      ];\n\t this.get().$promise.then((response) => {\n        this.isNotVirtualSegment.value = !response.virtualSegment && response.isMediaMaterialEnabled;\n      });\n    }\n\n    saveAndClose(form){\n      if(this.entity.virtualSegment !== undefined){\n        delete this.entity.virtualSegment;\n      }\n      this.save(form).then(()=>{ this.sotEdit = false; this.isNotVirtualSegment.value = true; });\n    }\n  \n  cancelSot(){\n    this.sotEdit =false;\n    this.isNotVirtualSegment.value = true;\n    this._load();\n  }\n}\n\n"],"sourceRoot":"/source/"}